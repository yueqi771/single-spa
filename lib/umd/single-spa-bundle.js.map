{"version":3,"file":"single-spa-bundle.js","sources":["../../src/application/appsHelper.js","../../src/start.js","../../src/lifecycles/helper.js","../../src/application/timeout.js","../../src/lifecycles/load.js","../../src/lifecycles/unmount.js","../../src/lifecycles/mount.js","../../src/lifecycles/bootstrap.js","../../src/navigations/hijackLoactions.js","../../src/navigations/invoke.js","../../src/application/app.js"],"sourcesContent":["export const NOT_LOADED = 'NOT_LOADED';\nexport const SKIP_BECAUSE_BROKEN = 'SKIP_BECAUSE_BROKEN';\nexport const LOAD_ERROR = 'LOAD_ERROR'\nexport const LOAD_SOURCE_CODE = 'LOAD_SOURCE_CODE'\nexport const NOT_BOOTSTRAP = 'NOT_BOOTSTRAP'\nexport const BOOTSTRAPPING = 'BOOTSTRAPPING';\nexport const NOT_MOUNTED = 'NOT_MOUNTED';\nexport const MOUNTED = 'MOUNTED'\nexport const MOUNTING = 'MOUNTING';\nexport const UNMOUNTING = 'UNMOUNTING';\nexport const UPDATING = 'UPDATING';\n\n\n// import { NOT_LOADED, notLoadError, notSkip, isntLoaded, shouldBeActivity } from './appsHelper';\nexport function notSkip(app) {\n    return app.status !== SKIP_BECAUSE_BROKEN;\n}\n\nexport function notLoadError(app) {\n    return app.status !== LOAD_ERROR;\n}\n\nexport function isntLoaded(app) {\n    return app.status === NOT_LOADED;\n}\n\nexport function isLoaded(app) {\n    return app.status !== NOT_LOADED && app.status !== SKIP_BECAUSE_BROKEN && app.status !== LOAD_ERROR;\n}\n\nexport function isActive(app) {\n    return app.status === MOUNTED\n}\n\nexport function isntActive(app) {\n    return !isActive (app)\n}\n\nexport function shouldBeActivity(app) {\n    try {\n        return app.activityWhen(window.location)\n    }catch(e) {\n        app.status = SKIP_BECAUSE_BROKEN\n        console.log(e)\n    }\n}\n\nexport function shouldntBeActivity(app) {\n    try {\n        return !app.activityWhen(window.location);\n    } catch(e) {\n        app.status = SKIP_BECAUSE_BROKEN;\n        throw e;\n    }\n}","import { invoke } from \"./navigations/invoke\";\n\n\n\nlet started = false;  \n\nexport function start() {\n    if(started) {\n        return Promise.resolve();\n    }\n\n    started = true;\n\n    return invoke()\n}\n\nexport function isStarted() {\n    return started\n}","export function smelLikeAPromise(promise) {\n    if(promise instanceof Promise) {\n        return true \n    }\n\n    return typeof promise === 'object' && typeof promise.then === 'function' && typeof promise.catch === 'function'\n}\n\n/**\n * \n * @param {*} lifecycles \n * @param {*} description \n */\nexport function flattenLifecyclesArray(lifecycles, description) {\n    if(!Array.isArray(lifecycles)) {\n        lifecycles = [lifecycles]\n    }\n\n    if(!lifecycles.length) {\n        lifecycles = [() => Promise.resolve()]\n    }\n\n    return props => new Promise((resolve, reject) => {\n        waitForPromises(0)\n        \n        function waitForPromises(index) {\n            let fn = lifecycles[index](props);\n\n            if(!smelLikeAPromise(fn)) {\n                reject(new Error(`${description} has error`))\n            }else {\n                fn.then(() => {\n                    if(index >= lifecycles.length - 1) {\n                        resolve()\n                    }else {\n                        waitForPromises(++index)\n                    }\n                }).catch(reject)\n            }\n        }\n    })\n}\n\n/**\n * \n */\nexport function getProps(app) {\n    return {\n        name: app.name,\n        ...app.customProps\n    }\n}\n\n","\nconst TIMEOUTS = {\n    bootstrap: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    },\n    mount: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    },\n    unmount: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    }\n}\n\nexport function reasonableTime(lifecyclePromise, description, timeout) {\n    return new Promise((resolve, reject) => {\n        let finished = false;\n        lifecyclePromise.then((data) => {\n            finished = true;\n            resolve(data)\n        }).catch(e => {\n            finished = true;\n            reject(e)\n        })\n\n        setTimeout(() => {\n            if(finished) { return };\n            if(timeout.rejectWhenTimeout) {\n                reject(`${description}`)\n            }else {\n                console.log('timeout but waiting')\n            }\n    \n        }, timeout.milliseconds)\n    })\n}\n\nexport function ensureTimeout(timeouts = {}) {\n    return {\n        ...TIMEOUTS,\n        ...timeouts\n    }\n}","import { NOT_LOADED, LOAD_SOURCE_CODE, SKIP_BECAUSE_BROKEN, NOT_BOOTSTRAP, LOAD_ERROR } from \"../application/appsHelper\";\nimport { smelLikeAPromise, flattenLifecyclesArray, getProps } from \"./helper\";\nimport { ensureTimeout } from '../application/timeout'\n\nexport function toLoadPromise(app) {\n    if(app.status !== NOT_LOADED) {\n        return Promise.resolve(app)\n    }\n\n    app.status = LOAD_SOURCE_CODE;\n    \n    let loadPromise = app.loadFunction(getProps(app))\n\n    if(!smelLikeAPromise(loadPromise)) {\n        app.status = SKIP_BECAUSE_BROKEN\n        return Promise.reject(new Error('加载函数不是一个promise'));\n    } \n    // 开始加载app了\n    return loadPromise.then(appConfig => {\n        if(typeof appConfig !== 'object') {\n            throw new Error('')\n        }\n\n        let errors = []\n        let lifecycles = ['bootstrap', 'mount', 'unmount']\n        lifecycles.forEach(lifecycle => {\n            if(!appConfig[lifecycle]) {\n                errors.push('lifecycle:' + lifecycle + 'must be exists')\n            }\n        })\n\n        if(errors.length) {\n            app.status = SKIP_BECAUSE_BROKEN;\n            console.log(errors);\n            return\n        }\n        \n        // 加载成功， 改变状态\n        app.status = NOT_BOOTSTRAP;\n        app.bootstrap = flattenLifecyclesArray(appConfig.bootstrap, `app: ${app.name} bootstraping`);\n        app.mount = flattenLifecyclesArray(appConfig.mount, `app: ${app.name} mounting`);\n        app.unmount = flattenLifecyclesArray(appConfig.unmount, `app: ${app.name} unmounting`);\n\n        // 处理超时\n        app.timeouts = ensureTimeout(appConfig.timeouts);\n\n        console.log('app加载完了', app)\n\n        return app;\n\n    }).catch(e => {\n        app.status = LOAD_ERROR;\n        console.log(e)\n    })\n}","import { MOUNTED, UNMOUNTING, NOT_MOUNTED, SKIP_BECAUSE_BROKEN } from \"../application/appsHelper\";\nimport { reasonableTime } from \"../application/timeout\";\nimport { getProps } from \"./helper\";\n\nexport function toUnmountPromise(app) {\n    if(app.status !== MOUNTED) {\n        return Promise.resolve(app)\n    };\n\n    app.status = UNMOUNTING;\n\n    reasonableTime(\n        app.unmount(getProps(app)), \n        `app: ${app.name} unmounting`,\n        app.timeouts.unmount\n    ).then(() => {\n        app.status = NOT_MOUNTED\n        return app\n    }).catch(e => {\n        app.status = SKIP_BECAUSE_BROKEN\n        console.log(e);\n        return app\n    })\n}","import { NOT_MOUNTED, MOUNTING, SKIP_BECAUSE_BROKEN, MOUNTED } from \"../application/appsHelper\";\nimport { reasonableTime } from \"../application/timeout\";\nimport { getProps } from \"./helper\";\nimport { toUnmountPromise } from \"./unmount\";\n\nexport function toMountPromise(app) {\n    if(app.status !== NOT_MOUNTED) {\n        return Promise.resolve(app)\n    }\n\n    app.status = MOUNTING;\n\n    return reasonableTime(app.mount(getProps(app)), `app: ${app.name} mounting`, app.timeouts.mount)\n    .then(() => {\n        app.status = MOUNTED;\n        return app\n    }).catch(e => {\n        // 如果app挂在失败， 立即执行unmount操作\n        app.status = MOUNTED;\n        console.log(e);\n\n        return toUnmountPromise()\n    });\n}","import { NOT_BOOTSTRAP, BOOTSTRAPPING, NOT_MOUNTED, SKIP_BECAUSE_BROKEN } from \"../application/appsHelper\";\nimport { reasonableTime } from \"../application/timeout\";\nimport { getProps } from \"./helper\";\n\nexport function toBootstrapPromise(app) {\n    if(app.status !== NOT_BOOTSTRAP) {\n        return Promise.resolve(app)\n    }\n\n    app.status = BOOTSTRAPPING;\n\n    return reasonableTime(app.bootstrap(getProps(app)), `app: ${app.name} bootstapping`, app.timeouts.bootstrap).then(\n        () => {\n            app.status = NOT_MOUNTED;\n            return app\n        }).catch(e => {\n            app.staus = SKIP_BECAUSE_BROKEN;\n            console.log(e)\n            return app\n        })\n}","import { invoke } from \"./invoke\";\n\nconst HIJACK_EVENTS_NAME = /^(hashchange|popstate)$/i;\nconst EVENT_POOL = {\n    hashchange: [],\n    popstate: []\n}\n\nfunction reroute() {\n    invoke([], arguments)\n}\n\nwindow.addEventListener('hashchange', reroute);\nwindow.addEventListener('popstate', reroute);\n\nconst originalAddEventListener = window.addEventListener;\nconst originalRemoveEventListener = window.removeEventListener;\n\nwindow.addEventListener = function(eventName, handler, ) {\n    if(eventName && HIJACK_EVENTS_NAME.test(this.eventName)) {\n        EVENT_POOL[eventName].indexOf(handler) === -1 && EVENT_POOL[eventName].push(handler)\n    }else {\n        originalAddEventListener.apply(this, arguments)\n    }\n}\n\nwindow.removeEventListener = function(eventName, handler, ) {\n    if(eventName && HIJACK_EVENTS_NAME.test(this.eventName)) {\n        let events = EVENT_POOL[eventName]\n        events.indexOf(handler) > -1 && \n        (EVENT_POOL[eventName] = events.filter(fn => fn !== handler))\n    }else {\n        originalRemoveEventListener.apply(window , arguments)\n    }\n}\n\nfunction mokePopStateEvent(state) {\n    return new PopStateEvent('popstate', { state })\n}\n\nconst originalPushState = window.history.pushState;\nconst originalReplaceState = window.history.replaceState;\n\nwindow.history.pushState = function(state, title, url) {\n    let result = originalPushState.apply(this, arguments);\n\n    reroute(mokePopStateEvent(state));\n\n    return result;\n}\n\nwindow.history.replaceState = function(state, title, url) {\n    let result = originalReplaceState.apply(this, arguments);\n\n    reroute(mokePopStateEvent(state));\n\n    return result;\n}\n\nexport function callCaptureEvents(eventsArgs) {\n    if(!eventsArgs) {\n        return\n    }\n\n    if(!Array.isArray(eventsArgs)) {\n        eventsArgs = [eventsArgs]\n    }\n\n    let name = eventsArgs[0].history;\n\n    if(!EVENT_POOL[name] || EVENT_POOL[name].length === 0) {\n        return;\n    }\n\n    EVENT_POOL[name].forEach(handler => {\n        handler.apply(null, eventsArgs)\n    })\n}","import { isStarted } from '../start'\nimport { getAppsToLoad, getAppsTomount, getAppsToUnmount } from '../application/app'\nimport { toLoadPromise } from '../lifecycles/load'\nimport { toMountPromise } from '../lifecycles/mount';\nimport { toUnmountPromise } from '../lifecycles/unmount';\nimport { toBootstrapPromise } from '../lifecycles/bootstrap';\nimport { getMountedApps } from '../application/app'\nimport { callCaptureEvents } from './hijackLoactions';\n\nlet appChangesUnderway = false;\nlet changesQueue = [];\n\nexport function invoke(pendings = [], eventArgs) {\n    // 现检查appChanges有没有在做事件循环\n    if(appChangesUnderway) {\n        return new Promise((resolve, reject) => {\n            changesQueue.push({\n                success: resolve,\n                failure: reject,\n                eventArgs\n            })\n        })\n    }\n\n    appChangesUnderway = true\n\n    // 判断应用是否启动\n    if(isStarted()) {\n        return performAppChanges()\n    }\n\n    // 如果应用没有启动， 那么启动应用\n    return loadApps();\n\n    function loadApps() {\n        // 获取需要被加载的app\n        return Promise.all(getAppsToLoad().map(toLoadPromise)).then((apps) => {\n            callAllCaptureEvents()\n            return finish();\n        }).catch(e => {\n            console.log(e)\n            callAllCaptureEvents()\n        })\n    }\n\n    /**\n     * @function 如果应用已经启动，那么卸载不需要的app，加载需要的app，挂载需要的app\n     */\n    function performAppChanges() {\n        // 先卸载不需要的app\n        let unmountPromise = getAppsToUnmount().map(toUnmountPromise);\n        unmountPromise = Promise.all(unmountPromise);\n        console.log('unmountPromise:', getAppsToUnmount())\n\n        // will load app --> NOT_MOUNTED\n        let loadApps = getAppsToLoad()\n        loadApps = loadApps.map(app => {\n            // 先去加载， 加载完成之后调用bootstrap, 然后卸载，然后加载\n            return toLoadPromise(app).then((app) => {\n                return toBootstrapPromise(app)\n                    .then(() => unmountPromise)\n                    .then(() =>  toMountPromise(app))\n            })\n        });\n\n        // will mount app --> NOT_MOUNTED\n        let mountApps = getAppsTomount();\n\n        // 针对load和mount的app做去重\n        mountApps = mountApps.filter(app => loadApps.indexOf(app) === -1) \n\n        mountApps = mountApps.map((app) => {\n            return toBootstrapPromise(app)\n                .then(() => unmountPromise)\n                .then(() => toMountPromise(app))\n        })\n\n        // 卸载没有问题的时候， 进行挂载新的\n        return unmountPromise.then(() => {\n            let allPromises = loadApps.concat(mountApps);\n            \n            return Promise.all(allPromises.map(toMountPromise)).then(() => {\n                callAllCaptureEvents()\n                return finish();\n            }, e => {\n                // 当一个promise状态已经改变的时候， 再次调用的时候不会在改变\n                pendings.forEach(item => item.failure(e));\n                throw e\n            })\n        }, e => {\n            callAllCaptureEvents()\n            console.log(e)\n        })\n    }\n\n    function finish() {\n        // 路由改变， 或者是调用start方法\n        // /home, 正在加载appA的时候， route变为了/index\n        // appA加载完成之后， 必须立马加载appB， 将appB放到changesQueue里面，\n        let returnValue = getMountedApps();\n        if(pendings.length) {\n            pendings.forEach(item => item.success(returnValue))\n        }\n\n        // 当前的循环已经完成\n        appChangesUnderway = false;\n        if(changesQueue.length) {\n            // backup就是当前循环中被推到事件队列里的事件， 这些事件交给下一次的invoke处理\n            let backup = changesQueue;\n            changesQueue = [];\n\n            invoke(backup);\n        }\n        \n        return returnValue\n    }\n\n\n    function callAllCaptureEvents() {\n        // 如果eventsQueue.length > 0  说明： 路由发生了改变\n        pendings && pendings.length &&\n        (\n            pendings.filter(item => {\n                // 判断是否有事件参数， 如果有的话， 说明路由发生了改变\n                return !!item.eventArgs\n            }).forEach(event => {\n                callCaptureEvents(event)\n            })\n        )\n\n\n        eventArgs && callCaptureEvents(eventArgs)\n    }\n}","import { NOT_LOADED, notLoadError, notSkip, isActive, isntLoaded, shouldBeActivity, shouldntBeActivity, isLoaded, isntActive,   } from './appsHelper';\nimport { invoke } from '../navigations/invoke';\n\n/**\n * @function 注册App\n * @param {string} appName 要注册的app的名称\n * @param {Function: Promise | Object} loadFunction app异步加载函数， 或者app的内容\n * @param {Function: boolean} activityWhen  判断该app应该何时启动\n * @param {Object} customProps  自定义参数配置\n * return Promise\n */\nconst APPS = []\nexport function registerApplication(appName, loadFunction, activityWhen, customProps = {}) {\n    // 判断参数是否合法\n    if(!appName || typeof appName !== 'string') {\n        throw new Error('appName不可以是一个空字符串')\n    }\n    if(!loadFunction) {\n        throw new Error('loadFunction must be a function or object')\n    }\n    if(typeof loadFunction !== 'function') {\n        loadFunction = () => Promise.resolve(loadFunction)\n    }\n    if(typeof activityWhen !== 'function') {\n        throw new Error('activityWhen must be a function')\n    }\n\n    APPS.push({\n        name: appName,\n        loadFunction,\n        activityWhen,\n        customProps,\n        status: NOT_LOADED\n    })\n\n    invoke();\n}\n\n/**\n * @function 获取需要被加载的app\n */\nexport function getAppsToLoad() {\n    return APPS.filter(notSkip).filter(notLoadError).filter(isntLoaded).filter(shouldBeActivity)\n}\n\nexport function getAppsToUnmount() {\n    return APPS.filter(notSkip).filter(isActive).filter(shouldntBeActivity)\n}\n\nexport function getAppsTomount() {\n    return APPS.filter(notSkip).filter(isLoaded).filter(isntActive).filter(shouldBeActivity)\n}\n\n// 获取当前已经挂载的app\nexport function getMountedApps() {\n    return APPS.filter(app => {\n        return isActive(app)\n    })\n}"],"names":["NOT_LOADED","SKIP_BECAUSE_BROKEN","LOAD_ERROR","LOAD_SOURCE_CODE","NOT_BOOTSTRAP","BOOTSTRAPPING","NOT_MOUNTED","MOUNTED","MOUNTING","UNMOUNTING","notSkip","app","status","notLoadError","isntLoaded","isLoaded","isActive","isntActive","shouldBeActivity","activityWhen","window","location","e","console","log","shouldntBeActivity","started","start","Promise","resolve","invoke","isStarted","smelLikeAPromise","promise","then","catch","flattenLifecyclesArray","lifecycles","description","Array","isArray","length","props","reject","waitForPromises","index","fn","Error","getProps","name","customProps","TIMEOUTS","bootstrap","milliseconds","rejectWhenTimeout","mount","unmount","reasonableTime","lifecyclePromise","timeout","finished","data","setTimeout","ensureTimeout","timeouts","toLoadPromise","loadPromise","loadFunction","appConfig","errors","forEach","lifecycle","push","toUnmountPromise","toMountPromise","toBootstrapPromise","staus","HIJACK_EVENTS_NAME","EVENT_POOL","hashchange","popstate","reroute","arguments","addEventListener","originalAddEventListener","originalRemoveEventListener","removeEventListener","eventName","handler","test","indexOf","apply","events","filter","mokePopStateEvent","state","PopStateEvent","originalPushState","history","pushState","originalReplaceState","replaceState","title","url","result","callCaptureEvents","eventsArgs","appChangesUnderway","changesQueue","pendings","eventArgs","success","failure","performAppChanges","loadApps","all","getAppsToLoad","map","apps","callAllCaptureEvents","finish","unmountPromise","getAppsToUnmount","mountApps","getAppsTomount","allPromises","concat","item","returnValue","getMountedApps","backup","event","APPS","registerApplication","appName"],"mappings":"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"}